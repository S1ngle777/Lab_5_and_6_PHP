# Лабораторная работа №5-6

- [Лабораторная работа №5-6](#лабораторная-работа-5-6)
    - [Инструкции по запуску проекта](#инструкции-по-запуску-проекта)
    - [Задания](#задания)
    - [Примеры использования](#примеры-использования)
    - [Список использованных источников](#список-использованных-источников)

## Инструкции по запуску проекта
1) Склонируйте репозиторий с проектом: git clone [https://github.com/S1ngle777/Lab_2_PHP.git](https://github.com/S1ngle777/Lab_2_PHP.git).
2) Запустите веб-сервер: php -S localhost:8080.
3) Откройте браузер и перейдите по адресу http://localhost:8080 для доступа к первому заданию.
4) Перейдите по адресу http://localhost:8080/task2.php для доступа ко второму заданию.
5) Перейдите по адресу http://localhost:8080/task3.php для доступа к третьему и четвёртому заданию.
6) Перейдите по адресу http://localhost:8080/task4.php для доступа к домашнему заданию.

## Задания
__1. Запись и чтение из файла__

1. Проанализируйте следующий скрипт

```php
<?php
//создание файла
$file = fopen("file.txt", "w") or die("Ошибка создания файла!");
//Вводим данные в файл
fwrite($file, "1. William Smith, 1990, 2344455666677\n");
fwrite($file, "2. John Doe, 1988, 4445556666787\n");
fwrite($file, "3. Michael Brown, 1991, 7748956996777\n");
fwrite($file, "4. David Johnson, 1987, 5556667779999\n");
fwrite($file, "5. Robert Jones, 1992, 99933456678888\n");
//Закрываем файл
fclose($file);
//Открываем файл для добавления данных
$file = fopen("file.txt", "a") or die("Ошибка открытия для добавления
данных!");
if (!$file) {
 echo("Не был найден файл для добавления данных!");
} else {
 // Добавьте в файл с помощью функции fwrite() еще 3 записи
}
fclose($file);
//Открываем файл для чтения из него
$file = fopen("file.txt", "r") or die("Ошибка открытия файла для чтения!");
if (!$file) {
 echo("Не был найден файл для чтения данных!");
} else { ?>
 <div>Данные из файла: </div>
 <?php
 while (!feof($file)) {
 echo fgets($file); ?>
 <br/>
 <?php
 }
 fclose($file);
}
```
2. Объясните, зачем необходимо закрывать файл fclose()

3. Добавьте в файл с помощью функции fwrite() ещё 3 записи

__2. Запись в файл с помощью функции file_get_contents()__

1. В задании №1 замените функцию fwrite на file_put_contents()

2. Чем отличается функция fwrite и file_put_contents?

__3. Обработка форм и файлов__

1. Проанализируйте следующий скрипт

```php
<?php if (!isset($_REQUEST['start'])) { ?>
<form action="<?php echo $_SERVER['SCRIPT_NAME'] ?>" method="post">
 <div>
 <label>Ваше имя: <input name="name" type="text" size="30"></label>
 </div>
 <div>
 <label>Ваше мнение о нас напишите тут:
 <textarea name="message" cols="40" rows="4" placeholder="Ваше
мнение..."></textarea>
 </label>
 </div>
 <div>
 <input type="reset" value="Стереть"/>
 <input type="submit" value="Передать" name="start"/>
 </div>
</form>
<?php } else {
 // Данные с формы
 $data = [
 'name' => $_POST['name'] ?? "",
 'message' => $_POST['message'] ?? "",
 ];
 // Сохранение данных в файл
 $file = fopen('messages.txt', 'a+') or die("Недоступный файл!");
 foreach ($data as $field => $value) {
 // Добавьте код для сохранения данных в файл
 }
 fwrite($file, "\n");
 fclose($file);
 // Вывод данных на экран
 echo 'Данные были сохранены! Вот что хранится в файле: <br />';
 $file = fopen("messages.txt", "r") or die("Недоступный файл!");
 while (!feof($file)) {
 echo fgets($file) . "<br />";
 }
 fclose($file);
}
```
2. Добавьте код, чтобы данные с формы сохранялись в файл
3. Добавьте еще 2 контроллера в форму и их верное сохранение в файл
    - Возраст (age), типа number.
    - E-mail, типа email

__4. Регистрация и авторизация пользователей__

1. Создайте HTML-форму регистрации с двумя полями: login (имя пользователя) и
password (пароль).

2. Напишите PHP-скрипт, который обрабатывает данные, отправленные с формы.

3. Скрипт должен:
    - Проверить, что все поля заполнены.
    - Зашифровать пароль пользователя с помощью функции md5().
    - Сохранить данные пользователя в текстовый файл (например, users.txt) в формате: login:password.

4. При успешной регистрации отправьте пользователю HTTP-код 201 (Created).
Объясните, для чего используются HTTP-коды.
5. Создайте HTML-форму авторизации с двумя полями: login (имя пользователя) и
password (пароль).
6. Напишите PHP-скрипт, который обрабатывает данные, отправленные с формы.
7. Скрипт должен:
    - Проверить, что все поля заполнены.
    - Проверить, существует ли пользователь с таким логином и паролем в файле users.txt.
    - Если пользователь не найден, вывести сообщение об ошибке.
    - Если пользователь найден, перенаправить его на страницу с изображениями (например, images.php) с помощью функции header().

## Примеры использования

__Задание 1.__



__Задание 2.__



__Задание 3.__

__Задание 4.__


## Список использованных источников

